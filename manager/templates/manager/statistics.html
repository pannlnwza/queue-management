{% extends 'sidebar_manage.html' %}

{% block content %}
<div class="w-full max-w-full">
            <div class="breadcrumbs text-sm mb-0">
              <ul>
                <li>
                  <a href="{% url 'manager:your-queue' %}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                      <path d="M3 3.5A1.5 1.5 0 0 1 4.5 2h1.879a1.5 1.5 0 0 1 1.06.44l1.122 1.12A1.5 1.5 0 0 0 9.62 4H11.5A1.5 1.5 0 0 1 13 5.5v1H3v-3ZM3.081 8a1.5 1.5 0 0 0-1.423 1.974l1 3A1.5 1.5 0 0 0 4.081 14h7.838a1.5 1.5 0 0 0 1.423-1.026l1-3A1.5 1.5 0 0 0 12.919 8H3.081Z" />
                    </svg>
                    Your Queues
                  </a>
                </li>
                <li>
                  <a class="font-serif" href="{% url 'manager:manage_waitlist' queue.id %}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                      <path d="M4.5 7c.681 0 1.3-.273 1.75-.715C6.7 6.727 7.319 7 8 7s1.3-.273 1.75-.715A2.5 2.5 0 1 0 11.5 2h-7a2.5 2.5 0 0 0 0 5ZM6.25 8.097A3.986 3.986 0 0 1 4.5 8.5c-.53 0-1.037-.103-1.5-.29v4.29h-.25a.75.75 0 0 0 0 1.5h.5a.754.754 0 0 0 .138-.013A.5.5 0 0 0 3.5 14H6a.5.5 0 0 0 .5-.5v-3A.5.5 0 0 1 7 10h2a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h2.5a.5.5 0 0 0 .112-.013c.045.009.09.013.138.013h.5a.75.75 0 1 0 0-1.5H13V8.21c-.463.187-.97.29-1.5.29a3.986 3.986 0 0 1-1.75-.403A3.986 3.986 0 0 1 8 8.5a3.986 3.986 0 0 1-1.75-.403Z" />
                    </svg>
                      {{ queue.name| title}}
                  </a>
                </li>
                <li>
                  <span class="inline-flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                      <path d="M13.975 6.5c.028.276-.199.5-.475.5h-4a.5.5 0 0 1-.5-.5v-4c0-.276.225-.503.5-.475A5.002 5.002 0 0 1 13.974 6.5Z" />
                      <path d="M6.5 4.025c.276-.028.5.199.5.475v4a.5.5 0 0 0 .5.5h4c.276 0 .503.225.475.5a5 5 0 1 1-5.474-5.475Z" />
                    </svg>
                    Statistics
                  </span>
                </li>
              </ul>
            </div>


            <div class="flex justify-between items-center mb-5">
                <h1 class="text-2xl font-bold antialiased font-sans">Statistics</h1>
            </div>

    <div class="max-w">
        <div class="flex justify-between items-center mb-6">
            <select class="select select-bordered w-40">
                <option>Last 7 days</option>
                <option>Last 30 days</option>
                <option>Last 3 months</option>
            </select>
        </div>

        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8">
            <div class="stat bg-base-200 rounded-box">
                <div class="stat-title">Waitlisted</div>
                <div class="stat-value">{{ waitlisted }}</div>
                <div class="stat-desc">{{ currently_waiting }} waiting now</div>
            </div>

            <div class="stat bg-base-200 rounded-box">
                <div class="stat-title">Serving</div>
                <div class="stat-value">{{ currently_serving }}</div>
                <div class="stat-desc">75% serve rate (Not done yet)</div>
            </div>

            <div class="stat bg-base-200 rounded-box">
                <div class="stat-title">Wait Time</div>
                <div class="stat-value">{{ average_wait_time }}</div>
                <div class="stat-desc">{{ max_wait_time }} longest wait</div>
            </div>

            <div class="stat bg-base-200 rounded-box">
                <div class="stat-title">Serve Duration</div>
                <div class="stat-value">{{ average_service_duration }}</div>
                <div class="stat-desc">{{ max_service_duration }} longest serve duration</div>
            </div>

            <div class="stat bg-base-200 rounded-box">
                <div class="stat-title">Peak Line Length</div>
                <div class="stat-value">{{ peak_line_length }}</div>
                <div class="stat-desc">{{ avg_line_length }} avg</div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <!-- Total Visits -->
            <div class="card bg-base-200">
                <div class="card-body">
                    <h2 class="card-title">Total visits last 7 days</h2>
                    <div class="w-full">
                        <div class="flex items-center gap-2 mb-2">
                            <progress class="progress progress-primary w-full" value="75" max="100"></progress>
                            <span class="text-sm">8</span>
                        </div>
                        <div class="flex gap-4 text-sm">
                            <span class="flex items-center gap-1">
                                <div class="badge badge-primary"></div>
                                Completed
                            </span>
                            <span class="flex items-center gap-1">
                                <div class="badge badge-secondary"></div>
                                Dropout
                            </span>
                            <span class="flex items-center gap-1">
                                <div class="badge badge-ghost"></div>
                                Unattended
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Donut Charts -->
            <div class="grid grid-cols-2 gap-4">
                <div class="card bg-base-200">
                    <div class="card-body">
                        <h2 class="card-title">Dropoffs</h2>
                        <div class="radial-progress" style="--value:75;">75%</div>
                    </div>
                </div>
                <div class="card bg-base-200">
                    <div class="card-body">
                        <h2 class="card-title">Visit creator</h2>
                        <div class="radial-progress" style="--value:60;">60%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tables -->
        <div class="grid gap-6">
            <!-- Users Table -->
            <div class="card bg-base-200">
                <div class="card-body">
                    <h2 class="card-title mb-4">Users</h2>
                    <div class="overflow-x-auto">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>NAME</th>
                                    <th>TOTAL</th>
                                    <th>SERVED</th>
                                    <th>WAITLISTED</th>
                                    <th>DROPOFF</th>
                                    <th>COMPLETED</th>
                                    <th>AVG WAIT TIME</th>
                                    <th>AVG SERVE TIME</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>panxi</td>
                                    <td>8</td>
                                    <td>5</td>
                                    <td>7</td>
                                    <td>1</td>
                                    <td>5</td>
                                    <td>17 hours</td>
                                    <td>4 hours</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Tables Section -->
            <div class="card bg-base-200">
                <div class="card-body">
                    <h2 class="card-title mb-4">Tables</h2>
                    <div class="overflow-x-auto">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>RESOURCE</th>
                                    <th>TOTAL</th>
                                    <th>SERVED</th>
                                    <th>WAITLISTED</th>
                                    <th>DROPOFF</th>
                                    <th>COMPLETED</th>
                                    <th>AVG WAIT TIME</th>
                                    <th>AVG SERVE TIME</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Table 1</td>
                                    <td>2</td>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>2 hours, 52 minutes</td>
                                    <td>7 hours</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}